# Датчики: Касание и звук

```package
core
radio
microphone
```

```template
basic.forever(function () {
	
})
```

```blocks
basic.forever(function () {
	
})
```
## Step 0 @showDialog
Привет! Сегодня мы узнаем, как научить Micro:bit реагировать на касание и звук.  
    
`Важно: этот урок рассказывает о функциях Micro:bit 2.0, которые отсутствуют в более старых версиях Micro:bit.`
## Step 1 @showDialog
### Касание и звук
Золотой логотип на передней стороне Micro:bit не только знает, когда его нажимают, но и может различать долгие и короткие нажатия. Больше об этом датчике в [видео](https://youtu.be/spFD3SxxxHQ).
  
Датчик звука измеряет громкость звуков вокруг и может различать тихие и громкие звуки.

## Step 2 @showDialog
### Датчик звука
В предыдущих уроках мы использовали датчики двумя способами:
- При работе с акселерометром мы использовали блок запуска программы, чтобы выполнять разные действия, если устройство находилось в разных положениях.
- При работе с датчиками света и температуры мы использовали круглые блоки данных, чтобы получать значения с датчиков и выводить их на экран.
      
Датчик звука использует оба этих способа.
  
Блок запуска программы:
```block
input.onSound(DetectedSound.Loud, function () {
})
```
Вывод на экран с помощью блока данных:
```block
basic.showNumber(input.soundLevel())
```
## Step 3 @showHint
### Измеряем звук
Блок ``||input.громкость звука||`` возвращает число в промежутке от 0 до 255. Чем громче звук, тем выше число.

Собери программу и загрузи её в Micro:bit. Затем мы проведём небольшой эксперимент.
```blocks
basic.forever(function () {
    basic.showNumber(input.soundLevel())
})
```
## Step 3.5 @showDialog
### Измеряем звук
Теперь, когда наш Micro:bit показывает уровень шума, давай узнаем, какие значения соответствуют:
- тишине
- шёпоту
- щелчкам пальцами
- хлопкам ладонями  
  
Запиши найденные числа. Они понадобятся тебе позже.

## Step 4 @showHint
### Тихий и громкий
Человек понимает разницу между "громким звуком" и "тихим звуком" интуитивно, компьютеры же хорошо понимают числа. Давай объясним Micro:bit разницу между тихим и громким звуком!  
Скажем программе, какой уровень звука мы будем считать тихим и громким, с помощью блоков ``||input.установить порог звука||``.
```hint
Используй числа, записанные ранее:
Шёпот - тихий звук
Хлопок - громкий звук
```
```blocks
input.setSoundThreshold(SoundThreshold.Quiet, 70)
input.setSoundThreshold(SoundThreshold.Loud, 200)
```
## Step 5 @showHint
### Тренировка речи
Дополни программу по образцу. Блок ``||input.когда звук громкий||`` выполнит программу, когда уровень шума превысит указанный ранее порог громкого звука.  
Блок ``||input.когда звук тихий||`` выполнит программу, когда уровень шума станет ниже указанного ранее порога тихого звука.  
Собери программу и загрузи её в Micro:bit. Поговори с устройством, стараясь говорить не слишком тихо и не слишком громко. Как долго ты продержишься?
```blocks
input.onSound(DetectedSound.Loud, function () {
    basic.showIcon(IconNames.Square)
    basic.clearScreen()
})
input.onSound(DetectedSound.Quiet, function () {
    basic.showIcon(IconNames.SmallSquare)
    basic.clearScreen()
})
input.setSoundThreshold(SoundThreshold.Quiet, 70)
input.setSoundThreshold(SoundThreshold.Loud, 200)

```

## Step 6
### Повторялка
Давай проверим новые знания на практике! Собери программу, которая будет отвечать звуком на звук.

## Step 7 @showHint
### Датчик касания
Для работы с датчиком касания используется блок ``||input.логотип||``. Этот блок работает так же, как блоки ``||input.кнопка нажата||``, но кроме обычного нажатия может запускать программу в момент касания, в момент отжатия логотипа и после длительного нажатия. Видишь его во вкладке ``||input.ввод||``?

```blocks
input.onLogoEvent(TouchButtonEvent.Pressed, function () {
	
})
```
## Step 8
### Морзе-передатчик @showHint
В этом примере датчик касания используется, чтобы издавать звук, который воспроизводится, пока датчик не будет отжат. Регулируя время нажатия, можно воспроизводить точки и тире!
```blocks
input.onLogoEvent(TouchButtonEvent.Released, function () {
    music.stopAllSounds()
})
input.onLogoEvent(TouchButtonEvent.Touched, function () {
    music.ringTone(262)
})
```
## Step 9
### Теперь твой черёд!
Давай совместим в программе два датчика! Напиши программу, которая будет измерять и показывать уровень звука по нажатию на логотип.
## Step 10 @showDialog
### Ответы: Повторялка
Вот один из вариантов программы:
```blocks
input.onSound(DetectedSound.Loud, function () {
    soundExpression.giggle.play()
})
input.setSoundThreshold(SoundThreshold.Loud, 200)
```

### Ответы: Теперь твой черёд!
```blocks
input.onLogoEvent(TouchButtonEvent.Pressed, function () {
    basic.showNumber(input.soundLevel())
})
```
## Step 8
Все задания выполнены!